---
// 主要佈局組件
interface Props {
  title: string;
  description?: string;
}

const { title, description = "亮亮的知識方舟 - 分享知識與見解的空間" } = Astro.props;
---

<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <title>{title}</title>

    <!-- 字體與圖標 -->
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    />

    <!-- 全局樣式 -->
    <style is:global>
      /* Tailwind 指令 */
      *,
      ::before,
      ::after {
        --tw-border-spacing-x: 0;
        --tw-border-spacing-y: 0;
        --tw-translate-x: 0;
        --tw-translate-y: 0;
        --tw-rotate: 0;
        --tw-skew-x: 0;
        --tw-skew-y: 0;
        --tw-scale-x: 1;
        --tw-scale-y: 1;
        --tw-pan-x:  ;
        --tw-pan-y:  ;
        --tw-pinch-zoom:  ;
        --tw-scroll-snap-strictness: proximity;
        --tw-gradient-from-position:  ;
        --tw-gradient-via-position:  ;
        --tw-gradient-to-position:  ;
        --tw-ordinal:  ;
        --tw-slashed-zero:  ;
        --tw-numeric-figure:  ;
        --tw-numeric-spacing:  ;
        --tw-numeric-fraction:  ;
        --tw-ring-inset:  ;
        --tw-ring-offset-width: 0px;
        --tw-ring-offset-color: #fff;
        --tw-ring-color: rgb(59 130 246 / 0.5);
        --tw-ring-offset-shadow: 0 0 #0000;
        --tw-ring-shadow: 0 0 #0000;
        --tw-shadow: 0 0 #0000;
        --tw-shadow-colored: 0 0 #0000;
        --tw-blur:  ;
        --tw-brightness:  ;
        --tw-contrast:  ;
        --tw-grayscale:  ;
        --tw-hue-rotate:  ;
        --tw-invert:  ;
        --tw-saturate:  ;
        --tw-sepia:  ;
        --tw-drop-shadow:  ;
        --tw-backdrop-blur:  ;
        --tw-backdrop-brightness:  ;
        --tw-backdrop-contrast:  ;
        --tw-backdrop-grayscale:  ;
        --tw-backdrop-hue-rotate:  ;
        --tw-backdrop-invert:  ;
        --tw-backdrop-opacity:  ;
        --tw-backdrop-saturate:  ;
        --tw-backdrop-sepia:  ;
        --tw-contain-size:  ;
        --tw-contain-layout:  ;
        --tw-contain-paint:  ;
        --tw-contain-style:  ;
      }
      ::backdrop {
        --tw-border-spacing-x: 0;
        --tw-border-spacing-y: 0;
        --tw-translate-x: 0;
        --tw-translate-y: 0;
        --tw-rotate: 0;
        --tw-skew-x: 0;
        --tw-skew-y: 0;
        --tw-scale-x: 1;
        --tw-scale-y: 1;
        --tw-pan-x:  ;
        --tw-pan-y:  ;
        --tw-pinch-zoom:  ;
        --tw-scroll-snap-strictness: proximity;
        --tw-gradient-from-position:  ;
        --tw-gradient-via-position:  ;
        --tw-gradient-to-position:  ;
        --tw-ordinal:  ;
        --tw-slashed-zero:  ;
        --tw-numeric-figure:  ;
        --tw-numeric-spacing:  ;
        --tw-numeric-fraction:  ;
        --tw-ring-inset:  ;
        --tw-ring-offset-width: 0px;
        --tw-ring-offset-color: #fff;
        --tw-ring-color: rgb(59 130 246 / 0.5);
        --tw-ring-offset-shadow: 0 0 #0000;
        --tw-ring-shadow: 0 0 #0000;
        --tw-shadow: 0 0 #0000;
        --tw-shadow-colored: 0 0 #0000;
        --tw-blur:  ;
        --tw-brightness:  ;
        --tw-contrast:  ;
        --tw-grayscale:  ;
        --tw-hue-rotate:  ;
        --tw-invert:  ;
        --tw-saturate:  ;
        --tw-sepia:  ;
        --tw-drop-shadow:  ;
        --tw-backdrop-blur:  ;
        --tw-backdrop-brightness:  ;
        --tw-backdrop-contrast:  ;
        --tw-backdrop-grayscale:  ;
        --tw-backdrop-hue-rotate:  ;
        --tw-backdrop-invert:  ;
        --tw-backdrop-opacity:  ;
        --tw-backdrop-saturate:  ;
        --tw-backdrop-sepia:  ;
        --tw-contain-size:  ;
        --tw-contain-layout:  ;
        --tw-contain-paint:  ;
        --tw-contain-style:  ;
      }

      /* 全局變量 */
      :root {
        color-scheme: light;
        --color-text-main: rgb(55 65 81);
        --color-text-secondary: rgb(75 85 99);
        --color-primary-accent: rgb(229 115 115);
        --color-secondary-accent: rgb(66 153 225);
        --color-tertiary-accent: rgb(236 152 82);
        --color-bg-main: rgb(245 245 245);
        --color-bg-card: rgb(255 255 255);
        --color-border: rgb(229 231 235);
        --color-soft-blue: rgb(219 234 254);
        --color-soft-pink: rgb(252 231 243);
        --color-soft-green: rgb(229 244 232);
        --color-soft-yellow: rgb(254 240 138);
        --color-soft-purple: rgb(237 233 254);
        --gradient-banner: linear-gradient(120deg, #7cb9c7, #e57373, #c8796e);
      }

      /* 基礎樣式 */
      body {
        background-color: var(--color-bg-main);
        font-family: "Noto Sans TC", sans-serif;
        color: var(--color-text-main);
        scroll-behavior: smooth;
      }

      /* 標題樣式 */
      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-weight: 700;
        color: rgb(31 41 55);
      }

      /* 優化警示框和提示框 */
      .text-yellow-700.bg-yellow-100 {
        background-color: var(--color-soft-yellow);
        color: rgb(161 98 7);
        border-radius: 0.5rem;
        padding: 1rem;
        border-left: 4px solid rgb(234 179 8);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.02);
      }

      .text-blue-700.bg-blue-100 {
        background-color: var(--color-soft-blue);
        color: rgb(30 64 175);
        border-radius: 0.5rem;
        padding: 1rem;
        border-left: 4px solid rgb(59 130 246);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.02);
      }

      .text-green-700.bg-green-100 {
        background-color: var(--color-soft-green);
        color: rgb(21 128 61);
        border-radius: 0.5rem;
        padding: 1rem;
        border-left: 4px solid rgb(34 197 94);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.02);
      }

      /* 引用塊樣式優化 */
      blockquote {
        border-left-width: 4px;
        border-color: var(--color-secondary-accent);
        background-color: var(--color-soft-blue);
        padding: 1.25rem;
        margin: 1.5rem 0;
        border-radius: 0.5rem;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.02);
      }

      blockquote p {
        color: rgb(55 65 81);
        font-style: italic;
        line-height: 1.6;
      }

      blockquote footer {
        color: rgb(107 114 128);
        font-size: 0.875rem;
        margin-top: 0.75rem;
      }

      /* 卡片樣式 */
      .bg-white {
        background-color: var(--color-bg-card);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03);
        border-radius: 0.5rem;
      }

      /* 表格樣式 */
      table {
        width: 100%;
        margin: 1.5rem 0;
        border-collapse: collapse;
        border-radius: 0.5rem;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);
      }

      th {
        background-color: rgb(238 242 247);
        color: var(--color-text-main);
        font-weight: 600;
        text-align: left;
        padding: 0.75rem 1rem;
        border: 1px solid rgb(224 231 235);
      }

      td {
        padding: 0.75rem 1rem;
        border: 1px solid rgb(224 231 235);
        background-color: rgb(255 255 255);
        color: var(--color-text-main);
      }

      tr:nth-child(even) td {
        background-color: rgb(245 249 252);
      }

      /* 注腳樣式 */
      .footnotes {
        margin-top: 2rem;
        padding-top: 1.5rem;
        border-top: 1px solid var(--color-border);
      }

      .footnotes h2 {
        font-size: 1.125rem;
        font-weight: 600;
        margin-bottom: 1rem;
      }

      .footnotes ol {
        padding-left: 1.5rem;
        list-style-type: decimal;
      }

      .footnotes li {
        margin-bottom: 0.5rem;
        color: var(--color-text-secondary);
      }

      .footnotes a {
        color: var(--color-primary-accent);
        text-decoration: none;
      }

      .footnotes a:hover {
        text-decoration: underline;
      }

      /* 導航和頁頭 */
      .sticky-nav {
        background-color: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(10px);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        border-bottom: 1px solid rgba(229, 231, 235, 0.7);
        transition: all 0.3s ease;
      }

      .nav-link {
        color: rgb(75, 85, 99);
        font-weight: 500;
        transition: all 0.2s ease;
        position: relative;
        display: flex;
        align-items: center;
      }

      .nav-link:hover {
        color: var(--color-primary-accent);
      }

      .nav-link-special {
        font-weight: 500;
        transition: all 0.2s ease;
      }

      .nav-link-special:hover {
        transform: translateY(-1px);
      }

      /* 頁面頭部標題區 */
      .header {
        background: var(--gradient-banner);
        color: white;
        padding: 3rem 1rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      }
    </style>
  </head>
  <body>
    <nav class="sticky-nav sticky top-0 z-50 py-2 bg-white/80">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <a
            href="/"
            class="text-xl sm:text-2xl font-bold text-gray-800 hover:text-primary-accent transition-colors flex items-center gap-2"
          >
            <i class="fas fa-book-open text-primary-accent"></i>
            <span>亮亮的知識方舟</span>
          </a>
          <div class="hidden md:flex items-center space-x-2">
            <a href="/#psychology" class="nav-link px-3 py-2 rounded-lg hover:bg-gray-100">
              <i class="fas fa-brain mr-1 text-sky-600"></i> 心理學
            </a>
            <a href="/#health" class="nav-link px-3 py-2 rounded-lg hover:bg-gray-100">
              <i class="fas fa-heartbeat mr-1 text-rose-500"></i> 健康
            </a>
            <a href="/#technology" class="nav-link px-3 py-2 rounded-lg hover:bg-gray-100">
              <i class="fas fa-microchip mr-1 text-indigo-500"></i> 科技
            </a>
            <a href="/#others" class="nav-link px-3 py-2 rounded-lg hover:bg-gray-100">
              <i class="fas fa-ellipsis-h mr-1 text-gray-500"></i> 其他
            </a>
          </div>
          <button
            id="mobile-menu-button"
            class="md:hidden focus:outline-none p-2 rounded-full hover:bg-gray-100"
          >
            <i class="fas fa-bars text-xl text-gray-800"></i>
          </button>
        </div>
      </div>
      <div id="mobile-menu" class="md:hidden hidden bg-white shadow-lg border-t border-gray-200">
        <a href="/#psychology" class="block py-3 px-4 text-base hover:bg-gray-100 text-gray-600">
          <i class="fas fa-brain mr-2 text-sky-600"></i>心理學
        </a>
        <a href="/#health" class="block py-3 px-4 text-base hover:bg-gray-100 text-gray-600">
          <i class="fas fa-heartbeat mr-2 text-rose-500"></i>健康
        </a>
        <a href="/#technology" class="block py-3 px-4 text-base hover:bg-gray-100 text-gray-600">
          <i class="fas fa-microchip mr-2 text-indigo-500"></i>科技
        </a>
        <a href="/#others" class="block py-3 px-4 text-base hover:bg-gray-100 text-gray-600">
          <i class="fas fa-ellipsis-h mr-2 text-gray-500"></i>其他
        </a>
      </div>
    </nav>

    <main class="prose prose-slate dark:prose-invert max-w-none">
      <slot />
    </main>

    <footer class="footer py-8 px-4 bg-gray-800 text-gray-300">
      <div class="container mx-auto">
        <div class="flex flex-col md:flex-row justify-between items-center">
          <div class="mb-4 md:mb-0">
            <p>&copy; {new Date().getFullYear()} 亮亮的知識方舟 - 保留所有權利</p>
          </div>
          <div class="flex space-x-4">
            <a href="/about" class="transition hover:text-white">關於我們</a>
            <a href="/privacy" class="transition hover:text-white">隱私政策</a>
            <a href="/terms" class="transition hover:text-white">使用條款</a>
          </div>
        </div>
      </div>
    </footer>

    <script>
      // 導航菜單切換
      document.addEventListener("DOMContentLoaded", () => {
        const mobileMenuButton = document.getElementById("mobile-menu-button");
        const mobileMenu = document.getElementById("mobile-menu");
        const nav = document.querySelector(".sticky-nav");

        // 移動端菜單切換
        if (mobileMenuButton && mobileMenu) {
          mobileMenuButton.addEventListener("click", () => {
            mobileMenu.classList.toggle("hidden");
          });
        }

        // 滾動效果
        if (nav) {
          let lastScroll = 0;
          window.addEventListener("scroll", () => {
            const currentScroll = window.pageYOffset;

            // 滾動超過 100px 時添加陰影效果和背景
            if (currentScroll > 10) {
              nav.classList.add("shadow-md", "bg-white/95");
              nav.classList.remove("bg-white/80");
            } else {
              nav.classList.remove("shadow-md", "bg-white/95");
              nav.classList.add("bg-white/80");
            }

            lastScroll = currentScroll;
          });
        }
      });
    </script>
  </body>
</html>
